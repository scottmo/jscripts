function $(e){if("string"==typeof e&&(e=[e]),Array.isArray(e)){for(var t of e){t=document.querySelector(t);if(t)return t}return null}return 1===e.nodeType?e:null}$.val=function(e,t){"INPUT"===e.nodeName&&"checkbox"===e.getAttribute("type")?e.checked=t:e.value=t},$.toggle=function(e,t){t=null!=t?t:"none"===$.css(e,"display");$.css(e,{display:t?"block":"none"})},$.trigger=function(e,t){e=$(e);t=new Event(t,{bubbles:!0});t.simulated=!0,e.dispatchEvent(t)},$.type=function(e,t){$.val(e,t),$.trigger(e,"input"),$.trigger(e,"change")},$.component=function({host:e,api:t={},css:n={},html:o,created:r}={}){const i=document.createElement("DIV");i.innerHTML=o;for(const[d,c]of Object.entries(n))i.querySelectorAll(d).forEach(e=>{$.css(e,c)});Object.assign(i,t);n=[...o.matchAll(/\sid=['"](\w+)["']/g)].map(e=>e[1]);const a={};return n.forEach(e=>{a[e]=i.querySelector("#"+e),a[e].setAttribute("id",e+"-"+$.uuid(4))}),i.$=a,"function"==typeof r&&r.call(i,a),e&&$(e).appendChild(i),i},$.css=function(e,n){let t;if(/^[\w-]+$/.test(n))return o=n,getComputedStyle(e).getPropertyValue(o);t="string"==typeof n?n.split("\n").map(e=>e.trim()).join(""):Object.keys(n).reduce((e,t)=>e+t.split(/(?=[A-Z])/).join("-").toLowerCase()+":"+n[t]+";","");var o=e.getAttribute("style");o&&(t=o+";"+t),e.setAttribute("style",t)},$.injectCSS=function(e){var t=document.createElement("style");t.innerHTML=e,document.head.appendChild(t)},$.draggable=function(t){var n,o,r,i,e;function a(e){(e=e||window.event).preventDefault(),r=e.clientX,i=e.clientY,document.onmouseup=c,document.onmousemove=d,t.dragged=0}function d(e){(e=e||window.event).preventDefault(),n=r-e.clientX,o=i-e.clientY,r=e.clientX,i=e.clientY,t.style.top=t.offsetTop-o+"px",t.style.left=t.offsetLeft-n+"px",t.dragged+=n+o}function c(){document.onmouseup=null,document.onmousemove=null}(t=$(t))&&(i=r=o=n=0,(e=t.querySelector(".header"))?e.onmousedown=a:t.onmousedown=a)},$.panel=function(e,o,{isDraggable:r=!0,x:t=20,y:n=20,isDisplayed:i=!0}={}){return $.component({host:"body",css:{".panel":{"z-index":"998",position:"absolute",top:t+"px",left:n+"px","box-shadow":"rgba(0, 0, 0, 0.2) 0px 4px 8px 0px","background-color":"white"},".header":{"z-index":"999","background-color":"rgb(33, 150, 243)",color:"rgb(255, 255, 255)","font-weight":"bold","font-size":"1.2rem","padding-top":"5px","padding-right":"5px","padding-bottom":"5px","padding-left":"5px","text-align":"center",cursor:"pointer","box-shadow":"rgba(0, 0, 0, 0.14) 0px 2px 2px 0px, rgba(0, 0, 0, 0.12) 0px 3px 1px -2px, rgba(0, 0, 0, 0.2) 0px 1px 5px 0px"},".body":{padding:"5px"}},html:`
            <div id="panel" class="panel">
                <div id="header" class="header">${e}</div>
                <div id="body" class="body"></div>
            </div>
        `,created({panel:e,header:t,body:n}){n.appendChild(o),t.addEventListener("click",()=>{0===e.dragged&&$.toggle(n)}),$.toggle(n,i),r&&$.draggable(e)}})},$.uuid=function(e){var t=([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e=>(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16));return e?"u"+t.substring(0,e):"u"+t},$._guid=0,$.guid=function(){return $._guid++},$.waitFor=async function(r,e,i){return new Promise(t=>{let n=0;var o=setInterval(function(){var e=document.querySelector(r);(e||n>=i)&&(clearInterval(o),t(e)),n++},e)})};